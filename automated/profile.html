<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Profile - Metadata Removal Tool</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
    font-family:system-ui,Segoe UI,Roboto;
    background:#0f172a;
    color:#e2e8f0;
    padding:20px;
}

.container{max-width:1200px;margin:auto;padding-top:40px}

.header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:40px;
}

.header h1{
    font-size:2.5rem;
    background:linear-gradient(135deg,#667eea,#764ba2);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
}

.nav-links{display:flex;gap:15px}
.nav-links a{
    color:#94a3b8;
    text-decoration:none;
    padding:10px 20px;
    border-radius:8px;
    transition:.3s;
}
.nav-links a:hover{color:#667eea;background:#1e293b}

.card{
    background:#1e293b;
    padding:40px;
    border-radius:20px;
    border:1px solid #334155;
    box-shadow:0 20px 60px rgba(0,0,0,.5);
    margin-bottom:30px;
}

.profile-header{
    display:flex;
    align-items:center;
    gap:25px;
    margin-bottom:30px;
    padding-bottom:30px;
    border-bottom:2px solid #334155;
}

.avatar{
    width:80px;
    height:80px;
    border-radius:50%;
    background:linear-gradient(135deg,#667eea,#764ba2);
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:2.5rem;
}

.profile-info h2{font-size:1.8rem;margin-bottom:5px}
.profile-info p{color:#94a3b8}

.info-grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
    gap:20px;
    margin-bottom:30px;
}

.info-item{
    background:#0f172a;
    padding:20px;
    border-radius:12px;
    border:2px solid #334155;
}

.info-item label{
    display:block;
    color:#94a3b8;
    font-size:.85rem;
    margin-bottom:8px;
    text-transform:uppercase;
    letter-spacing:.5px;
}

.info-item .value{
    font-size:1.1rem;
    font-weight:600;
}

.form-group{margin-bottom:20px}

.form-group label{
    display:block;
    margin-bottom:8px;
    color:#94a3b8;
    font-size:.9rem;
    font-weight:500;
}

.form-group input{
    width:100%;
    padding:14px;
    border-radius:10px;
    font-size:1rem;
    background:#0f172a;
    color:#e2e8f0;
    border:2px solid #334155;
    transition:.3s;
}

.form-group input:focus{
    outline:none;
    border-color:#667eea;
}

button{
    padding:14px 28px;
    border-radius:10px;
    font-size:1rem;
    border:none;
    cursor:pointer;
    background:linear-gradient(135deg,#667eea,#764ba2);
    color:#fff;
    font-weight:600;
    transition:.3s;
}

button:hover{
    transform:translateY(-2px);
    box-shadow:0 10px 25px rgba(102,126,234,.3);
}

button:disabled{opacity:.5;cursor:not-allowed;transform:none}

.btn-secondary{
    background:linear-gradient(135deg,#3b82f6,#2563eb);
}

.btn-danger{
    background:linear-gradient(135deg,#ef4444,#dc2626);
}

.btn-small{
    padding:8px 16px;
    font-size:.85rem;
}

.section-title{
    font-size:1.4rem;
    margin-bottom:20px;
    color:#e2e8f0;
    display:flex;
    align-items:center;
    justify-content:space-between;
}

.error{
    background:rgba(239,68,68,.2);
    border:2px solid #ef4444;
    padding:12px;
    border-radius:10px;
    margin-bottom:20px;
    color:#ef4444;
}

.success{
    background:rgba(34,197,94,.2);
    border:2px solid #22c55e;
    padding:12px;
    border-radius:10px;
    margin-bottom:20px;
    color:#22c55e;
}

.hidden{display:none}

.modal{
    display:none;
    position:fixed;
    top:0;left:0;
    width:100%;height:100%;
    background:rgba(0,0,0,.8);
    align-items:center;
    justify-content:center;
    z-index:1000;
    overflow-y:auto;
    padding:20px;
}

.modal.show{display:flex}

.modal-content{
    background:#1e293b;
    padding:30px;
    border-radius:15px;
    max-width:1000px;
    width:100%;
    border:1px solid #334155;
    max-height:90vh;
    overflow-y:auto;
}

.modal-buttons{
    display:flex;
    gap:10px;
    margin-top:20px;
}

.modal-buttons button{width:100%}

/* File History Styles */
.history-filters{
    display:flex;
    gap:10px;
    margin-bottom:20px;
    flex-wrap:wrap;
}

.filter-btn{
    padding:8px 16px;
    background:#0f172a;
    border:2px solid #334155;
    border-radius:8px;
    color:#94a3b8;
    cursor:pointer;
    transition:.3s;
    font-size:.9rem;
}

.filter-btn.active{
    background:linear-gradient(135deg,#667eea,#764ba2);
    border-color:transparent;
    color:#fff;
}

.filter-btn:hover:not(.active){
    border-color:#667eea;
    color:#e2e8f0;
}

.history-grid{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(300px,1fr));
    gap:20px;
}

.history-item{
    background:#0f172a;
    border:2px solid #334155;
    border-radius:12px;
    padding:20px;
    transition:.3s;
    cursor:pointer;
}

.history-item:hover{
    border-color:#667eea;
    transform:translateY(-5px);
}

.history-header{
    display:flex;
    align-items:center;
    gap:12px;
    margin-bottom:15px;
}

.file-icon-large{
    width:50px;
    height:50px;
    background:linear-gradient(135deg,#667eea,#764ba2);
    border-radius:10px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:1.5rem;
}

.history-info h4{
    font-size:1rem;
    margin-bottom:5px;
    color:#e2e8f0;
    overflow:hidden;
    text-overflow:ellipsis;
    white-space:nowrap;
}

.history-date{
    font-size:.8rem;
    color:#64748b;
}

.risk-badge{
    display:inline-block;
    padding:4px 12px;
    border-radius:6px;
    font-size:.75rem;
    font-weight:600;
    text-transform:uppercase;
    margin-bottom:10px;
}

.risk-low{background:rgba(34,197,94,.2);color:#22c55e}
.risk-medium{background:rgba(245,158,11,.2);color:#f59e0b}
.risk-high{background:rgba(239,68,68,.2);color:#ef4444}

.stats-row{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:10px;
    margin-bottom:15px;
}

.stat-mini{
    background:#1e293b;
    padding:10px;
    border-radius:8px;
    text-align:center;
}

.stat-mini .label{
    font-size:.7rem;
    color:#94a3b8;
    text-transform:uppercase;
}

.stat-mini .value{
    font-size:1.2rem;
    font-weight:700;
    color:#667eea;
}

.history-actions{
    display:flex;
    gap:8px;
    margin-top:15px;
}

.history-actions button{
    flex:1;
    padding:10px;
    font-size:.85rem;
}

.empty-state{
    text-align:center;
    padding:60px 20px;
    color:#64748b;
}

.empty-state-icon{
    font-size:4rem;
    margin-bottom:20px;
}

/* Comparison Modal */
.comparison-grid{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:30px;
    margin-top:20px;
}

.comparison-column h4{
    font-size:1.1rem;
    margin-bottom:15px;
    color:#e2e8f0;
    text-align:center;
}

.metadata-list{
    background:#0f172a;
    border-radius:10px;
    padding:15px;
    max-height:400px;
    overflow-y:auto;
}

.metadata-item{
    padding:12px;
    background:#1e293b;
    border-radius:8px;
    margin-bottom:10px;
    border-left:3px solid #667eea;
}

.metadata-key{
    font-weight:600;
    font-size:.9rem;
    margin-bottom:5px;
    color:#e2e8f0;
}

.metadata-value{
    font-size:.8rem;
    color:#94a3b8;
    word-break:break-all;
}

.metadata-category{
    display:inline-block;
    margin-top:5px;
    padding:2px 8px;
    background:#334155;
    border-radius:4px;
    font-size:.7rem;
    color:#94a3b8;
}

.loading{
    text-align:center;
    padding:40px;
    color:#94a3b8;
}

.spinner{
    width:50px;
    height:50px;
    border:4px solid #334155;
    border-top:4px solid #667eea;
    border-radius:50%;
    animation:spin 1s linear infinite;
    margin:0 auto 20px;
}

@keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>

<body>
<div class="container">
    <div class="header">
        <h1>üë§ My Profile</h1>
        <div class="nav-links">
            <a href="index.html">üè† Home</a>
            <a href="#" id="logoutLink">üö™ Logout</a>
        </div>
    </div>

    <!-- Profile Overview -->
    <div class="card">
        <div class="profile-header">
            <div class="avatar" id="avatar">üë§</div>
            <div class="profile-info">
                <h2 id="profileName">Loading...</h2>
                <p id="profileEmail">email@example.com</p>
            </div>
        </div>

        <div class="info-grid">
            <div class="info-item">
                <label>Username</label>
                <div class="value" id="username">-</div>
            </div>
            <div class="info-item">
                <label>Member Since</label>
                <div class="value" id="memberSince">-</div>
            </div>
            <div class="info-item">
                <label>Files Cleaned</label>
                <div class="value" id="totalFiles">0</div>
            </div>
            <div class="info-item">
                <label>Total Metadata Removed</label>
                <div class="value" id="totalMetadata">0</div>
            </div>
        </div>
    </div>

    <!-- File History -->
    <div class="card">
        <div class="section-title">
            <span>üìÇ Cleaning History</span>
            <button class="btn-small btn-secondary" id="refreshHistory">üîÑ Refresh</button>
        </div>

        <div class="history-filters">
            <button class="filter-btn active" data-filter="all">All Files</button>
            <button class="filter-btn" data-filter="low">Low Risk</button>
            <button class="filter-btn" data-filter="medium">Medium Risk</button>
            <button class="filter-btn" data-filter="high">High Risk</button>
        </div>

        <div id="historyContent">
            <div class="loading">
                <div class="spinner"></div>
                <p>Loading history...</p>
            </div>
        </div>
    </div>

    <!-- Update Profile -->
    <div class="card">
        <h3 class="section-title">‚úèÔ∏è Update Profile</h3>
        <div id="updateMessage"></div>
        <form id="updateForm">
            <div class="form-group">
                <label>Email</label>
                <input type="email" id="updateEmail" required>
            </div>
            <div class="form-group">
                <label>First Name</label>
                <input type="text" id="updateFirstName">
            </div>
            <div class="form-group">
                <label>Last Name</label>
                <input type="text" id="updateLastName">
            </div>
            <button type="submit" class="btn-secondary">üíæ Save Changes</button>
        </form>
    </div>

    <!-- Change Password -->
    <div class="card">
        <h3 class="section-title">üîê Change Password</h3>
        <div id="passwordMessage"></div>
        <form id="passwordForm">
            <div class="form-group">
                <label>Current Password</label>
                <input type="password" id="oldPassword" required>
            </div>
            <div class="form-group">
                <label>New Password</label>
                <input type="password" id="newPassword" required>
            </div>
            <div class="form-group">
                <label>Confirm New Password</label>
                <input type="password" id="newPassword2" required>
            </div>
            <button type="submit" class="btn-secondary">üîÑ Update Password</button>
        </form>
    </div>

    <!-- Danger Zone -->
    <div class="card">
        <h3 class="section-title" style="color:#ef4444">‚ö†Ô∏è Danger Zone</h3>
        <p style="color:#94a3b8;margin-bottom:20px">
            Once you delete your account, there is no going back. This action cannot be undone.
        </p>
        <button class="btn-danger" id="deleteAccountBtn">üóëÔ∏è Delete Account</button>
    </div>
</div>

<!-- Comparison Modal -->
<div class="modal" id="comparisonModal">
    <div class="modal-content">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px">
            <h3 style="color:#e2e8f0">üîç Before vs After Comparison</h3>
            <button style="background:transparent;border:none;color:#94a3b8;font-size:1.5rem;cursor:pointer;padding:5px 10px" id="closeComparison">‚úï</button>
        </div>

        <div id="comparisonContent">
            <div class="loading">
                <div class="spinner"></div>
                <p>Loading comparison...</p>
            </div>
        </div>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal" id="deleteModal">
    <div class="modal-content" style="max-width:500px">
        <h3 style="margin-bottom:15px;color:#ef4444">‚ö†Ô∏è Confirm Account Deletion</h3>
        <p style="color:#94a3b8;margin-bottom:20px">
            This will permanently delete your account and all associated data. 
            Please enter your password to confirm.
        </p>
        <div id="deleteMessage"></div>
        <input type="password" id="deletePassword" placeholder="Enter your password" 
               style="width:100%;padding:12px;border-radius:8px;background:#0f172a;
               border:2px solid #334155;color:#e2e8f0;margin-bottom:15px">
        <div class="modal-buttons">
            <button class="btn-secondary" id="cancelDelete">Cancel</button>
            <button class="btn-danger" id="confirmDelete">Delete Account</button>
        </div>
    </div>
</div>

<script src="profile-script.js"></script>
</body>
</html>